webpackJsonp([1],{"2EII":function(t,e,n){t.exports=n.p+"static/img/webwxgetmsgimg.9882800.jpeg"},"8HAp":function(t,e){},GvYg:function(t,e){},Hktm:function(t,e,n){t.exports=n.p+"static/img/user.f0d7ba3.jpeg"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(t){n("Pe99")},null,null).exports,i=n("/ocq"),o=n("Xxa5"),c=n.n(o),u=n("exGp"),l=n.n(u),d={name:"Login",data:function(){return{msg:"this is login vue",name:"",password:"",email:"",loginActive:!0}},methods:{login:function(){var t=l()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("login",{name:this.name,password:this.password});case 3:e=t.sent,this.$store.commit("updateSessionUser",{user:e.data[0]}),this.$store.commit("createWs",{}),window.location="/#/index",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),this.$message.error("登录失败，请重新登录",t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),registry:function(){if(this.loginActive)this.loginActive=!1;else try{this.$store.dispatch("registry",{name:this.name,password:this.password,email:this.email}),this.$message("注册成功，请重新登录"),this.loginActive=!0}catch(t){this.$message.error("注册失败",t)}},cancel:function(){this.loginActive=!0}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"item"},[n("label",{staticClass:"item-label"},[t._v("请输入用户名")]),t._v(" "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("div",{staticClass:"item"},[n("label",{staticClass:"item-label"},[t._v("请输入密码")]),t._v(" "),n("el-input",{attrs:{placeholder:"请输入内容","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),t.loginActive?t._e():n("div",{staticClass:"item"},[n("label",{staticClass:"item-label"},[t._v("请输入邮箱")]),t._v(" "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),t.loginActive?n("div",{staticClass:"item-foot"},[n("el-button",{on:{click:t.login}},[t._v("登录")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.registry}},[t._v("注册")])],1):t._e(),t._v(" "),t.loginActive?t._e():n("div",{staticClass:"item-foot"},[n("el-button",{attrs:{type:"primary"},on:{click:t.registry}},[t._v("注册")]),t._v(" "),n("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var v=n("VU/8")(d,p,!1,function(t){n("gzXk")},"data-v-054fe8b8",null).exports,f={name:"userList",data:function(){return{friends:[]}},methods:{upadteUser:function(t){this.$store.commit("updateCurrentUser",{user:t})},isActive:function(t){return this.$store.state.currentUser.Name===t.Name}},created:function(){var t=l()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getAllFriends");case 2:this.friends=t.sent.data[0],this.$store.commit("updateCurrentUser",{user:this.friends[0]});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.friends,function(e){return[n("div",{key:e.Name,staticClass:"item",class:{active:t.isActive(e)},on:{click:function(n){return t.upadteUser(e)}}},[t._m(0,!0),t._v(" "),n("div",{staticClass:"item-right"},[n("div",{staticClass:"title"},[n("div",[t._v(" "+t._s(e.Name)+" ")])]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.LastMessage))])])])]})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left"},[e("img",{staticClass:"img",attrs:{src:n("Hktm")}})])}]};var h={name:"ChatList",data:function(){return{url:"./webwxgetmsgimg.jpeg"}},methods:{logout:function(){window.location="/#/"},addUser:function(){this.$router.push("/#/add-user")}},computed:{getSessionName:function(){return this.$store.state.user.user.Name}},components:{userList:n("VU/8")(f,m,!1,function(t){n("GvYg")},"data-v-ffa87fb8",null).exports}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-body"},[n("div",{staticClass:"header"},[t._m(0),t._v(" "),n("div",{staticClass:"action"},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("span",[t._v(" "+t._s(t.getSessionName))]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"el-icon-plus"},on:{click:t.logout}},[t._v("logout")]),t._v(" "),n("el-dropdown-item",{attrs:{icon:"el-icon-plus"},on:{click:t.addUser}},[t._v("add user")])],1)],1)],1)]),t._v(" "),n("div",[n("userList")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("img",{staticClass:"img",attrs:{src:n("2EII")}})])}]};var _=n("VU/8")(h,g,!1,function(t){n("iFtB")},"data-v-3e82e7f7",null).exports,w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message-body"},[t._l(t.messages,function(e){return[n("div",{key:e.ID,staticClass:"item-default",class:{"item-right":t.getPosition(e)}},[n("div",{staticClass:"message-item"},[n("div",[n("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),t._v(" "),n("div",[t._v(t._s(e.Content))])])])]})],2)},staticRenderFns:[]};var x={name:"userSend",data:function(){return{value:""}},methods:{sendMesage:function(){this.$store.dispatch("sendMessage",{SourceName:this.$store.state.currentUser.Name,content:this.value}),console.log("ready to send message",this.value),this.cleanInputMessage()},cleanInputMessage:function(){this.value=""}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message-body"},[n("div",{staticClass:"message-action"}),t._v(" "),n("div",{staticClass:"message-content"},[n("div",{staticStyle:{margin:"20px 0"}}),t._v(" "),n("el-input",{attrs:{type:"textarea"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("div",{staticClass:"message-send"},[n("el-button",{attrs:{size:"mini"},on:{click:t.sendMesage}},[t._v("sendMessage")])],1)])},staticRenderFns:[]};var I={name:"ChatInfo",components:{UserInfo:n("VU/8")({name:"UserInfo",data:function(){return{userID:2,messages:[{ID:1,userID:1,Content:"asdad",Icon:"aaa"},{ID:2,userID:2,Content:"asdad",Icon:"aaa"},{ID:3,userID:1,Content:"asdad",Icon:"aaa"},{ID:4,userID:2,Content:"asdad",Icon:"aaa"},{ID:5,userID:2,Content:"asdad",Icon:"aaa"},{ID:6,userID:1,Content:"asdad",Icon:"aaa"},{ID:7,userID:1,Content:"asdad",Icon:"aaa"},{ID:8,userID:1,Content:"asdad",Icon:"aaa"},{ID:9,userID:1,Content:"asdad",Icon:"aaa"},{ID:0,userID:1,Content:"asdad",Icon:"aaa"}]}},methods:{getPosition:function(t){return t.userID===this.userID}}},w,!1,function(t){n("tzeI")},"data-v-57c40948",null).exports,userSend:n("VU/8")(x,C,!1,function(t){n("sNxy")},"data-v-005b5e16",null).exports}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-container",[n("el-header",[n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                        下拉菜单\n\t\t\t\t\t\t"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[t._v("黄金糕")]),t._v(" "),n("el-dropdown-item",[t._v("狮子头")]),t._v(" "),n("el-dropdown-item",[t._v("螺蛳粉")])],1)],1)],1),t._v(" "),n("el-main",[n("UserInfo")],1),t._v(" "),n("el-footer",[n("userSend")],1)],1)],1)},staticRenderFns:[]},k={name:"Index",data:function(){return{msg:"this is index vue"}},components:{ChatList:_,ChatInfo:n("VU/8")(I,b,!1,null,null,null).exports}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"body"},[e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("ChatList")],1),this._v(" "),e("el-main",[e("ChatInfo")],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(k,y,!1,function(t){n("8HAp")},"data-v-3a89c467",null).exports,D={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    this is html for user add\n")])},staticRenderFns:[]};var $=n("VU/8")({name:"AddUSer"},D,!1,function(t){n("l8Xh")},"data-v-9dd0e0be",null).exports;s.default.use(i.a);var A=new i.a({routes:[{path:"/",name:"Login",component:v},{path:"/index",name:"Index",component:U},{path:"/add-user",name:"AddUSer",component:$}]}),N=n("zL8q"),S=n.n(N),E=n("Dd8w"),F=n.n(E),L=n("woOf"),M=n.n(L),R=n("2aIq"),V=n.n(R),H=n("NYxO");s.default.use(H.a);var z=new H.a.Store({state:{user:{},active:!1,currentUser:{},users:[],ws:{}},mutations:{updateSessionUser:function(t,e){V()(t),this.state.user=M()({},e)},updateCurrentUser:function(t,e){V()(t),this.state.currentUser=M()({},e.user)},createWs:function(){this.state.ws=new WebSocket("ws://localhost:9999/event?id="+this.state.user.user.Name),this.state.ws.onmessage=function(t){console.log(t.data)},this.state.ws.onopen=function(){console.log("open websocket")}}},actions:{login:function(){var t=l()(c.a.mark(function t(e,n){e.context;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.axios.post("/api/login",F()({},n)));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),registry:function(){var t=l()(c.a.mark(function t(e,n){e.context;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.axios.post("/api/registry",F()({},n)));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),getAllFriends:function(){var t=l()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.axios.get("/api/friends/2"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),searchUsers:function(){var t=l()(c.a.mark(function t(e,n){e.context;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.axios.get("/api/users/"+value));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),addGroup:function(t,e){t.context},createGroup:function(t,e){t.context;return s.default.axios.post("/api/create-group",e.group)},deleteGroup:function(t,e){t.context;return s.default.axios.delete("/api/delete-group/"+e.groupID)},sendMessage:function(){var t=l()(c.a.mark(function t(e,n){e.context;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.axios.post("/api/sendmessage",n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}),G=n("mtWM"),P=n.n(G),W=n("Rf8U"),X=n.n(W);s.default.prototype.HOST="/api",s.default.use(X.a,P.a),s.default.use(S.a),s.default.config.productionTip=!1,new s.default({el:"#app",store:z,router:A,components:{App:r},template:"<App/>"})},Pe99:function(t,e){},gzXk:function(t,e){},iFtB:function(t,e){},l8Xh:function(t,e){},sNxy:function(t,e){},tzeI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bb1a530432511341c5f3.js.map